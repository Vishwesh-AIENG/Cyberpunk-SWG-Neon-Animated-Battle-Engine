:root{
  --bg1:#070007;
  --bg2:#2b082b;
  --neon1:#c77dff;
  --neon2:#7df0ff;
  --muted:#a891b8;
  --panel-bg:rgba(6,2,18,0.85);
  --accent:#ff73ff;
}

/* Reset */
*{box-sizing:border-box}
html,body,#root{height:100%}
body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial;background:
 radial-gradient(circle at 10% 10%, #2b0a3a 0%, #050007 40%, #020007 100%);color:#efe7ff;}

/* App container */
.cp-app-root{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:28px;position:relative}
.ui-container{width:100%;max-width:1150px;z-index:6}

/* Background particles */
.bg-particles{position:fixed;inset:0;z-index:0;pointer-events:none}
.bg-dot{position:absolute;width:10px;height:10px;border-radius:50%;background:linear-gradient(135deg,var(--neon1),var(--neon2));opacity:0.06;filter:blur(6px)}
.bg-dot.d0{left:6%;top:10%;width:14px;height:14px}
.bg-dot.d1{left:20%;top:36%}
.bg-dot.d2{left:4%;top:62%}
.bg-dot.d3{left:28%;top:78%}
.bg-dot.d4{left:46%;top:10%}
.bg-dot.d5{left:66%;top:6%}
.bg-dot.d6{left:82%;top:28%}
.bg-dot.d7{left:72%;top:54%}
.bg-dot.d8{left:56%;top:76%}
.bg-dot.d9{left:36%;top:46%}

/* Intro screen */
.intro-screen{background:linear-gradient(180deg,rgba(10,3,20,0.75),rgba(8,2,18,0.55));border-radius:18px;padding:44px;text-align:center;border:1px solid rgba(199,125,255,0.12);backdrop-filter:blur(6px);box-shadow:0 12px 60px rgba(0,0,0,0.6)}
.intro-title{font-size:42px;margin:0;letter-spacing:0.12em;color:#fff;text-transform:uppercase;text-shadow:0 0 24px rgba(200,120,255,0.45)}
.intro-title span{color:var(--accent);text-shadow:0 0 40px rgba(255,91,255,0.9)}
.start-btn{margin-top:22px;padding:14px 28px;border-radius:999px;background:linear-gradient(180deg,#2b0533,#15051c);color:#fff;border:1px solid rgba(255,255,255,0.06);font-weight:700;cursor:pointer}
.start-btn:hover{transform:translateY(-3px);box-shadow:0 18px 60px rgba(199,125,255,0.16)}
.intro-note{margin-top:12px;color:var(--muted);font-size:12px}

/* Game shell */
.game-shell{display:grid;grid-template-columns:260px 1fr;gap:20px;align-items:start}

/* Panels */
.panel{border-radius:14px;padding:18px;background:linear-gradient(180deg,rgba(3,0,12,0.85),rgba(8,3,24,0.9));border:1px solid rgba(143,91,255,0.16);box-shadow:0 8px 40px rgba(4,2,12,0.7);position:relative;overflow:visible}
.panel-left{min-height:260px}
.title-small{font-size:18px;margin:0 0 6px 0;letter-spacing:0.08em}
.muted{color:var(--muted);font-size:13px;margin-bottom:12px}

/* Score card */
.score-card{margin-top:12px;background:rgba(10,4,24,0.6);padding:12px;border-radius:10px;border:1px solid rgba(143,91,255,0.06)}
.score-row{display:flex;justify-content:space-between;padding:6px 4px;font-weight:600;color:#e9dbff}
.left-controls{display:flex;gap:10px;margin-top:16px}
.btn.pill{padding:10px 12px;border-radius:999px;border:none;background:linear-gradient(180deg,#22103b,#130820);color:#fff;cursor:pointer}
.btn.pill.danger{background:linear-gradient(180deg,#3b1022,#220612)}

/* Center */
.panel-main{position:relative;padding:22px;display:flex;flex-direction:column;gap:14px;min-height:360px}
.center-block{display:flex;flex-direction:column;align-items:center}
.result-box{width:100%;max-width:520px;background:linear-gradient(180deg, rgba(20,6,44,0.45), rgba(8,2,24,0.4));padding:12px;border-radius:10px;border:1px solid rgba(199,125,255,0.06)}
.result-header{font-weight:800;color:var(--neon1);letter-spacing:0.08em;text-transform:uppercase}
.result-body{color:var(--muted);white-space:pre-line;padding-top:8px}

/* Choices */
.choices-row{display:flex;gap:12px;margin-top:12px;justify-content:center}
.choice{background:linear-gradient(180deg,#2a0b32,#14041a);border-radius:12px;padding:12px 16px;min-width:120px;border:1px solid rgba(143,91,255,0.24);cursor:pointer;color:#fff;display:flex;flex-direction:column;align-items:center}
.choice-emoji{font-size:26px}
.choice-name{font-size:12px;margin-top:6px;letter-spacing:0.12em}

/* Preview card */
.panel-right{position:absolute;right:16px;top:16px;width:150px}
.preview-card{background:rgba(6,3,18,0.6);padding:10px;border-radius:10px;border:1px solid rgba(143,91,255,0.06);text-align:center}
.preview-title{font-size:12px;color:var(--muted);letter-spacing:0.12em}
.preview-emoji{font-size:30px;margin-top:8px}

/* Sprite wrapper: neon border via pseudo elements */
.sprite-wrap{
  position:relative;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  border-radius:12px;
  padding:6px;
  transition:transform .25s ease;
  z-index:10;
}
/* two sizes */
.sprite-wrap.small{width:96px;height:96px}
.sprite-wrap.big{width:190px;height:190px}
/* image */
.sprite-img{
  width:100%;
  height:100%;
  object-fit:contain;
  border-radius:10px;
  display:block;
  transform-origin:center center;
  backface-visibility:hidden;
  will-change:transform, filter, opacity;
  box-shadow: 0 8px 40px rgba(0,0,0,0.6);
  border-radius:10px;
  position:relative;
  z-index:5;
  transition: transform .25s ease, filter .25s ease, opacity .2s ease;
}
/* fallback emoji shown while loading or on error */
.sprite-fallback{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;font-size:42px;border-radius:10px;z-index:6;color:#fff;pointer-events:none;background:linear-gradient(180deg, rgba(8,4,24,0.12), rgba(0,0,0,0.0))}
.fallback-hidden{opacity:0;pointer-events:none;transition:opacity .28s ease}

/* neon border: animated gradient ring around sprite */
.sprite-wrap::before,
.sprite-wrap::after{
  content:"";
  position:absolute;
  inset:-6px;
  border-radius:14px;
  z-index:2;
  pointer-events:none;
  mix-blend-mode:screen;
  opacity:0.95;
}
.sprite-wrap::before{
  background:linear-gradient(90deg, rgba(199,125,255,0.14), rgba(125,240,255,0.09));
  filter:blur(8px);
  transform:translateZ(0);
}
.sprite-wrap::after{
  inset:-3px;
  background:conic-gradient(from 120deg, #a86aff, #ff7be6, #7df0ff, #c77dff);
  -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  padding:3px;
  opacity:0.85;
  filter:blur(6px) saturate(1.2);
  animation: border-rotate 3s linear infinite;
}

/* inner neon glow */
.sprite-wrap .sprite-img.visible{
  box-shadow: 0 12px 40px rgba(199,125,255,0.12), 0 0 24px rgba(199,125,255,0.15);
}

/* pulse animation (stepped to feel frame-like) */
@keyframes pulse-frames {
  0% { transform: scale(1); }
  25% { transform: scale(1.04); }
  50% { transform: scale(1); }
  75% { transform: scale(1.03); }
  100% { transform: scale(1); }
}
/* apply with steps to feel a frame-pulse */
.sprite-img.visible {
  animation: pulse-frames 1.1s steps(4, end) infinite;
}

/* glitch effect when img appears */
@keyframes glitch-x {
  0% { transform: translateX(0); clip-path: inset(0 0 0 0); }
  10% { transform: translateX(-6px); clip-path: inset(10% 0 60% 0); }
  20% { transform: translateX(6px); clip-path: inset(20% 0 40% 0); }
  30% { transform: translateX(-4px); clip-path: inset(30% 0 20% 0); }
  40% { transform: translateX(4px); clip-path: inset(40% 0 10% 0); }
  100% { transform: translateX(0); clip-path: inset(0 0 0 0); }
}
.sprite-img.glitch{
  animation: glitch-x .6s linear .02s 1;
  filter: hue-rotate(8deg) saturate(1.15) drop-shadow(0 6px 18px rgba(199,125,255,0.25));
}

/* small overlay shimmer */
.sprite-wrap::after { mix-blend-mode:screen; pointer-events:none; }

/* cutscene and result styles */
.cutscene-overlay{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;background:radial-gradient(circle, rgba(60,10,120,0.85), rgba(2,0,6,0.98));z-index:40;backdrop-filter:blur(4px)}
.cutscene-row{display:flex;gap:36px;align-items:center;z-index:44}
.cut-chunk{text-align:center}
.emoji-large{font-size:72px;text-shadow:0 0 30px rgba(255,120,255,0.65)}
.cut-label{margin-top:8px;color:var(--muted);letter-spacing:0.14em}
.cut-vs{font-weight:900;color:var(--accent);font-size:28px;transform:skew(-6deg)}
.cut-text{margin-top:16px;color:#ffe8ff;font-weight:700}

/* result burst */
.result-burst{position:absolute;inset:0;pointer-events:none;z-index:50;display:flex;align-items:center;justify-content:center}
.burst-dot{width:10px;height:10px;border-radius:50%;background:linear-gradient(135deg,var(--neon1),var(--neon2));position:absolute;filter:blur(0.5px)}

/* sparkles */
.sparkles{position:absolute;inset:0;pointer-events:none;z-index:46}
.sparkle-dot{position:absolute;width:6px;height:6px;border-radius:999px;background:linear-gradient(circle,#fff6c9,#ffb86c);filter:blur(0.6px)}

/* footer */
.footer-badge{position:fixed;right:14px;bottom:10px;font-size:11px;color:var(--muted);z-index:60}

/* animations */
@keyframes border-rotate {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* responsive */
@media(max-width:900px){
  .game-shell{grid-template-columns:1fr;gap:12px}
  .panel-right{position:static;width:auto}
  .intro-title{font-size:30px}
}
